<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Code Generator</title>

<style>
:root {
  --bg: #0a0f1c;
  --card: rgba(17,24,39,0.8);
  --accent: #60a5fa;
  --accent2: #8b5cf6;
  --text: #e2e8f0;
}

body {
  margin:0;
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  padding: 20px;
}

.container {
  background: var(--card);
  border-radius: 20px;
  padding: 30px;
  max-width: 420px;
  width: 100%;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.4);
}

h1 {
  text-align: center;
  margin-bottom: 20px;
  font-size: 1.6rem;
}

input, select, button {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  border-radius: 12px;
  border: none;
  font-size: 1rem;
}

input, select {
  background: rgba(255,255,255,0.05);
  color: var(--text);
}

button {
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  color: white;
  cursor: pointer;
  font-weight: bold;
  transition: 0.3s;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(96,165,250,0.5);
}

#qr-code-wrapper {
  margin-top: 20px;
  display: flex;
  justify-content: center;
}

/* Responsive */
@media (max-width: 500px) {
  .container {
    max-width: 100%;
    padding: 20px;
  }
}
</style>
</head>
<body>

<div class="container">
  <h1>QR Code Generator</h1>
<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="miw4n" data-color="#FFDD00" data-emoji="üßã"  data-font="Cookie" data-text="Buy me a bubble tea" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
  <input type="text" id="text" placeholder="Entrez URL ou texte">

  <label>Couleur des carr√©s :</label>
  <input type="color" id="colorDark" value="#000000">

  <label>Couleur de fond :</label>
  <input type="color" id="colorLight" value="#ffffff">

  <label>Taille (px) :</label>
  <input type="number" id="size" value="250" min="150" max="500">

  <label>Image au centre (optionnel) :</label>
  <input type="file" id="centerImage" accept="image/*">

  <button id="generate">G√©n√©rer QR Code</button>
  <button id="download" style="display:none;">T√©l√©charger PNG</button>

  <div id="qr-code-wrapper"></div>
</div>

<!-- Librairie QR Code Styling -->
<script src="https://cdn.jsdelivr.net/npm/qr-code-styling/lib/qr-code-styling.js"></script>
<script>
let qrCode;
let centerImageURL = "";

// Charger l'image s√©lectionn√©e
document.getElementById('centerImage').onchange = function(e) {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(ev) {
    centerImageURL = ev.target.result;
  };
  reader.readAsDataURL(file);
};

document.getElementById('generate').onclick = () => {
  const value = document.getElementById('text').value;
  if(!value) return alert("Entrez une URL ou du texte !");

  const colorDark = document.getElementById('colorDark').value;
  const colorLight = document.getElementById('colorLight').value;
  const size = parseInt(document.getElementById('size').value);

  // Clear previous
  document.getElementById('qr-code-wrapper').innerHTML = "";

  // Create QR Code
  qrCode = new QRCodeStyling({
    width: size,
    height: size,
    data: value,
    image: centerImageURL || "", // image optionnelle au centre
    dotsOptions: {
      color: colorDark,
      type: "square" // coins carr√©s
    },
    cornersSquareOptions: {
      color: colorDark,
      type: "square" // coins carr√©s
    },
    backgroundOptions: {
      color: colorLight
    },
    qrOptions: {
      typeNumber: 0,
      mode: "Byte",
      errorCorrectionLevel: "H"
    }
  });

  qrCode.append(document.getElementById("qr-code-wrapper"));
  document.getElementById('download').style.display = 'block';
};

// T√©l√©charger
document.getElementById('download').onclick = () => {
  if(!qrCode) return;
  qrCode.download({ extension: "png" });
};
</script>

</body>
</html>
